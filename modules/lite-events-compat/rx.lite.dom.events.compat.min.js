/* Copyright (c) Microsoft, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){function b(a){return a&&a.Object===Object?a:null}var c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType?exports:null,e=c[typeof module]&&module&&!module.nodeType?module:null,f=b(d&&e&&"object"==typeof global&&global),g=b(c[typeof self]&&self),h=b(c[typeof window]&&window),i=(e&&e.exports===d?d:null,b(c[typeof this]&&this)),j=f||h!==(i&&i.window)&&h||g||i||Function("return this")();"function"==typeof define&&define.amd?define(["rx-lite-compat"],function(b,c){return a(j,c,b)}):"object"==typeof module&&module&&module.exports===d?module.exports=a(j,module.exports,require("rx-lite-compat")):j.Rx=a(j,{},j.Rx)}).call(this,function(a,b,c,d){function e(a,b,c,d){this._e=a,this._n=b,this._fn=c,this._u=d,this._e.addEventListener(this._n,this._fn,this._u),this.isDisposed=!1}function f(a,b,c,d){if(a.addEventListener)return new e(a,b,c,d);throw new Error("No listener found")}function g(a,b,c,d){var e=new i,h=Object.prototype.toString;if("[object NodeList]"===h.call(a)||"[object HTMLCollection]"===h.call(a))for(var j=0,k=a.length;k>j;j++)e.add(g(a.item(j),b,c,d));else a&&e.add(f(a,b,c,d));return e}var h=c.ObservableBase,i=c.CompositeDisposable,j=c.DOM||(c.DOM={}),k=c.helpers.isFunction,l=c.internals.inherits;a.Element&&a.Element.prototype.attachEvent&&!a.Element.prototype.addEventListener&&function(){function b(a,b){Window.prototype[a]=HTMLDocument.prototype[a]=Element.prototype[a]=b}function c(){c.interval&&document.body&&(c.interval=clearInterval(c.interval),document.dispatchEvent(new CustomEvent("DOMContentLoaded")))}b("addEventListener",function(b,c){var d=this,e=d._c1_listeners=d._c1_listeners||{},f=e[b]=e[b]||[];d.attachEvent("on"+b,f.event=function(b){b||(b=a.event);var c=d.document&&d.document.documentElement||d.documentElement||{scrollLeft:0,scrollTop:0};switch(b.currentTarget=d,b.pageX=b.clientX+c.scrollLeft,b.pageY=b.clientY+c.scrollTop,b.preventDefault=function(){if(a.bubbledKeyCode=a.keyCode,a.ctrlKey)try{a.keyCode=0}catch(a){}a.defaultPrevented=!0,a.returnValue=!1,a.modified=!0,a.returnValue=!1},b.stopImmediatePropagation=function(){l=!1,b.cancelBubble=!0},b.stopPropagation=function(){b.cancelBubble=!0},b.relatedTarget=b.fromElement||null,b.target=b.srcElement||d,b.timeStamp=+new Date,b.type){case"keypress":var e="charCode"in b?b.charCode:b.keyCode;10===e?(e=0,b.keyCode=13):13===e||27===e?e=0:3===e&&(e=99),b.charCode=e,b.keyChar=b.charCode?String.fromCharCode(b.charCode):""}var g={};for(var h in b)g[h]=b[h];for(var i,j=0,k=[].concat(f),l=!0;l&&(i=k[j]);++j)for(var m,n=0;m=f[n];++n)if(m===i){m.call(d,g);break}}),f.push(c)}),b("removeEventListener",function(a,b){for(var c,d=this,e=d._c1_listeners=d._c1_listeners||{},f=e[a]=e[a]||[],g=f.length-1;c=f[g];--g)if(c===b){f.splice(g,1);break}!f.length&&f.event&&d.detachEvent("on"+a,f.event)}),b("dispatchEvent",function(a){var b=this,c=a.type,d=b._c1_listeners=b._c1_listeners||{},e=d[c]=d[c]||[];try{return b.fireEvent("on"+c,a)}catch(f){return e.event&&e.event(a)}}),c.interval=setInterval(c,1),a.addEventListener("load",c)}(),(!a.CustomEvent||"object"==typeof a.CustomEvent)&&function(){function b(a,b){var c;b=b||{bubbles:!1,cancelable:!1,detail:d};try{c=document.createEvent("CustomEvent"),c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail)}catch(e){c=document.createEvent("Event"),c.initEvent(a,b.bubbles,b.cancelable),c.detail=b.detail}return c}a.CustomEvent&&(b.prototype=a.CustomEvent.prototype),a.CustomEvent=b}(),e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._e.removeEventListener(this._n,this._fn,this._u))};var m=function(a){function b(b,c,d,e){this._e=b,this._n=c,this._fn=d,this._uc=e,a.call(this)}function c(a,b){return function(){var c=arguments[0];if(b){var c=tryCatch(b).apply(null,arguments);if(c===errorObj)return a.onError(c.e)}a.onNext(c)}}return l(b,a),b.prototype.subscribeCore=function(a){return g(this._e,this._n,c(a,this._fn),this._uc)},b}(h),n=j.fromEvent=function(a,b,c,d){var e=k(c)?c:null;return"boolean"==typeof c&&(d=c),"undefined"==typeof d&&(d=!1),new m(a,b,e,d).publish().refCount()};!function(){var b="blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu input";a.PointerEvent&&(b+=" pointerdown pointerup pointermove pointerover pointerout pointerenter pointerleave"),a.TouchEvent&&(b+=" touchstart touchend touchmove touchcancel"),b=b.split(" ");for(var c=0,d=b.length;d>c;c++)!function(a){j[a]=function(b,c,d){return n(b,a,c,d)}}(b[c])}();var o=function(b){function c(){b.call(this)}function d(a){return function(){a.onNext(),a.onCompleted()}}function e(b,c){this._o=b,this._fn=c,this._addedHandlers=!1,this.isDisposed=!1,"complete"===a.document.readyState?setTimeout(this._fn,0):(this._addedHandlers=!0,a.document.addEventListener("DOMContentLoaded",this._fn,!1))}return l(c,b),c.prototype.subscribeCore=function(a){return new e(a,d(a))},e.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,a.document.removeEventListener("DOMContentLoaded",this._fn,!1))},c}(h);return j.ready=function(){return new o},c});
//# sourceMappingURL=rx.lite.dom.events.compat.map