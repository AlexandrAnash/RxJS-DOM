/* Copyright (c) Microsoft, Inc. All rights reserved. See License.txt in the project root for license information.*/
(function(a){function b(a){return a&&a.Object===Object?a:null}var c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType?exports:null,e=c[typeof module]&&module&&!module.nodeType?module:null,f=b(d&&e&&"object"==typeof global&&global),g=b(c[typeof self]&&self),h=b(c[typeof window]&&window),i=(e&&e.exports===d?d:null,b(c[typeof this]&&this)),j=f||h!==(i&&i.window)&&h||g||i||Function("return this")();"function"==typeof define&&define.amd?define(["rx-compat"],function(b,c){return a(j,c,b)}):"object"==typeof module&&module&&module.exports===d?module.exports=a(j,module.exports,require("rx-compat")):j.Rx=a(j,{},j.Rx)}).call(this,function(a,b,c,d){var e,f,g=c.Disposable,h=c.BinaryDisposable,i=c.SingleAssignmentDisposable,j=c.Scheduler,k=c.internals.inherits;return a.requestAnimationFrame?(e=a.requestAnimationFrame,f=a.cancelAnimationFrame):a.mozRequestAnimationFrame?(e=a.mozRequestAnimationFrame,f=a.mozCancelAnimationFrame):a.webkitRequestAnimationFrame?(e=a.webkitRequestAnimationFrame,f=a.webkitCancelAnimationFrame):a.msRequestAnimationFrame?(e=a.msRequestAnimationFrame,f=a.msCancelAnimationFrame):a.oRequestAnimationFrame?(e=a.oRequestAnimationFrame,f=a.oCancelAnimationFrame):(e=function(b){a.setTimeout(b,1e3/60)},f=a.clearTimeout),j.requestAnimationFrame=function(){var b=function(b){function c(){b.call(this)}function d(a,b,c,d){return function(){!a.isDisposed&&a.setDisposable(g._fixup(b(c,d)))}}function j(a,b){this._id=b,this._method=a,this.isDisposed=!1}return k(c,b),j.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._method.call(null,this._id))},c.prototype.schedule=function(a,b){var c=new i,g=e(d(c,b,this,a));return new h(c,new j(f,g))},c.prototype._scheduleFuture=function(b,c,e){if(0===c)return this.schedule(b,e);var f=new i,g=a.setTimeout(d(f,e,this,b),c);return new h(f,new j(a.clearTimeout,g))},c}(j);return new b}(),j.microtask=function(){function b(a){delete m[a]}function c(d){if(n)a.setTimeout(function(){c(d)},0);else{var e=m[d];if(e){n=!0;try{e()}catch(f){throw f}finally{b(d),n=!1}}}}function d(){if(!a.postMessage||a.importScripts)return!1;var b=!1,c=a.onmessage;return a.onmessage=function(){b=!0},a.postMessage("","*"),a.onmessage=c,b}function e(a){"string"==typeof a.data&&a.data.substring(0,s.length)===s&&c(a.data.substring(s.length))}var f,l=1,m={},n=!1,o=a.MutationObserver||a.WebKitMutationObserver;if(o){var p="drainqueue_",q=new o(function(a){a.forEach(function(a){c(a.attributeName.substring(p.length))})}),r=a.document.createElement("div");q.observe(r,{attributes:!0}),a.addEventListener("unload",function(){q.disconnect(),q=null},!1),f=function(a){var b=l++;return m[b]=a,r.setAttribute(p+b,"drainQueue"),b}}else if("function"==typeof a.setImmediate)f=function(b){var d=l++;return m[d]=b,a.setImmediate(function(){c(d)}),d};else if(d()){var s="ms.rx.schedule"+Math.random();a.addEventListener?a.addEventListener("message",e,!1):a.attachEvent&&a.attachEvent("onmessage",e),f=function(b){var c=l++;return m[c]=b,a.postMessage(s+c,"*"),c}}else if(a.MessageChannel){var t=new a.MessageChannel;t.port1.onmessage=function(a){c(a.data)},f=function(a){var b=l++;return m[b]=a,t.port2.postMessage(b),b}}else f="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(b){var d=a.document.createElement("script"),e=l++;return m[e]=b,d.onreadystatechange=function(){c(e),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},a.document.documentElement.appendChild(d),e}:function(b){var d=l++;return m[d]=b,a.setTimeout(function(){c(d)},0),d};var u=function(c){function d(){c.call(this)}function e(a,b,c,d){return function(){!a.isDisposed&&a.setDisposable(g._fixup(b(c,d)))}}function j(a,b){this._id=b,this._method=a,this.isDisposed=!1}return k(d,c),j.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._method.call(null,this._id))},d.prototype.schedule=function(a,c){var d=new i,g=f(e(d,c,this,a));return new h(d,new j(b,g))},d.prototype._scheduleFuture=function(b,c,d){if(0===c)return this.schedule(b,d);var f=new i,g=a.setTimeout(e(f,d,this,b),c);return new h(f,new j(a.clearTimeout,g))},d}(j);return new u}(),c});
//# sourceMappingURL=rx.dom.concurrency.compat.map