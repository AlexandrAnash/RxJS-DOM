/*
 Copyright (c) Microsoft Corporation.  All rights reserved.
 This code is licensed by Microsoft Corporation under the terms
 of the MICROSOFT REACTIVE EXTENSIONS FOR JAVASCRIPT AND .NET LIBRARIES License.
 See http://go.microsoft.com/fwlink/?LinkID=220762.
*/
(function(D,t){var k,M=function(){},H=function(){return(new Date).getTime()},T=function(a,b){return a===b},y=function(a){return a},U=function(a){return a.toString()},V=Object.prototype.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)"prototype"!==d&&V.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype;a.prototype=new c;a.base=b.prototype;return a},E=function(a,b){for(var c in b)"prototype"!==c&&V.call(b,c)&&(a[c]=b[c])},v=Array.prototype.slice;"undefined"!==typeof exports?
(k=module.exports,k.Internals={}):k=D.Rx={Internals:{}};k.VERSION="2.0.20304";var la=function(a,b){return i(function(c){return new o(b.getDisposable(),a.subscribe(c))})},N=function(a,b,c){return i(function(d){var e=new r,f=new r,d=c(d,e,f);e.disposable(a.materialize().select(function(b){return{switchValue:function(a){return a(b)}}}).subscribe(d));f.disposable(b.materialize().select(function(b){return{switchValue:function(a,c){return c(b)}}}).subscribe(d));return new o(e,f)})},C=function(a,b){for(var c=
Object(this),d=0,e=c.length>>>0;d<e;d++)if(!a.call(b,c[d],d,c))return false;return true},W=function(a,b){for(var c=[],d,e=Object(this),f=0,h=e.length>>>0;f<h;f++){d=e[f];a.call(b,d,f,e)&&c.push(d)}return c},ma=function(a,b){for(var c=[],d=Object(this),e=0,f=d.length>>>0;e<f;e++)c.push(a.call(b,d[e],e,d));return c},F=function(a,b){return a.length===1&&a[b]instanceof Array?a[b]:v.call(a)},s=k.Internals.List=function(){function a(b){this.comparer=b||T;this.length=0;this.items=[]}a.fromArray=function(b,
c){var d=new a(c);d.items=b.slice();d.length=b.length;return d};a.prototype.add=function(b){this.items[this.length++]=b};a.prototype.removeAt=function(b){if(b<0||b>=this.length)throw Error("Argument out of range");this.items.splice(b,1);this.length--};a.prototype.indexOf=function(b){for(var a=0,d=this.items.length;a<d;a++)if(this.comparer(b,this.items[a]))return a;return-1};a.prototype.remove=function(b){b=this.indexOf(b);if(b===-1)return false;this.removeAt(b);return true};a.prototype.clear=function(){this.items=
[];this.length=0};a.prototype.item=function(b,a){if(b<0||b>=count)throw Error("Argument out of range");if(a===t)return this.items[b];this.items[b]=a};a.prototype.toArray=function(){return this.items.slice(0)};a.prototype.contains=function(b){for(var a=0,d=this.items.length;a<d;a++)if(this.comparer(b,this.items[a]))return true;return false};return a}(),na=function(){function a(b,a){this.id=b;this.value=a}a.prototype.compareTo=function(b){var a=this.value.compareTo(b.value);a===0&&(a=this.id-b.id);
return a};return a}(),X=function(){function a(b){this.items=Array(b);this.length=0}a.prototype.isHigherPriority=function(b,a){return this.items[b].compareTo(this.items[a])<0};a.prototype.percolate=function(b){var a,d;if(!(b>=this.length||b<0)){a=b-1>>1;if(!(a<0||a===b)&&this.isHigherPriority(b,a)){d=this.items[b];this.items[b]=this.items[a];this.items[a]=d;this.percolate(a)}}};a.prototype.heapify=function(b){var a,d,e;b===t&&(b=0);if(!(b>=this.length||b<0)){d=2*b+1;e=2*b+2;a=b;d<this.length&&this.isHigherPriority(d,
a)&&(a=d);e<this.length&&this.isHigherPriority(e,a)&&(a=e);if(a!==b){d=this.items[b];this.items[b]=this.items[a];this.items[a]=d;this.heapify(a)}}};a.prototype.peek=function(){return this.items[0].value};a.prototype.removeAt=function(b){this.items[b]=this.items[--this.length];delete this.items[this.length];this.heapify();if(this.length<this.items.length>>2)for(var b=this.items,a=this.items=Array(this.items.length>>1),d=this.length;d>0;){a[d+0-1]=b[d+0-1];d--}};a.prototype.dequeue=function(){var b=
this.peek();this.removeAt(0);return b};a.prototype.enqueue=function(b){var c;if(this.length>=this.items.length){c=this.items;for(var d=this.items=Array(this.items.length*2),e=c.length;e>0;){d[e+0-1]=c[e+0-1];e--}}c=this.length++;this.items[c]=new na(a.count++,b);this.percolate(c)};a.prototype.remove=function(b){for(var a=0;a<this.length;a++)if(this.items[a].value===b){this.removeAt(a);return true}return false};a.count=0;return a}(),o=k.CompositeDisposable=function(){function a(){var b=F(arguments,
0);this.disposables=s.fromArray(b);this.isDisposed=false;this.length=this.disposables.length}a.prototype.add=function(b){if(this.isDisposed)b.dispose();else{this.disposables.add(b);this.length++}};a.prototype.remove=function(b){var a=false;if(!this.isDisposed){a=this.disposables.remove(b);this.length--}a&&b.dispose();return a};a.prototype.dispose=function(){var b;if(!this.isDisposed){this.isDisposed=true;b=this.disposables.toArray();this.disposables.clear();this.length=0}if(b)for(var a=0,d=b.length;a<
d;a++)b[a].dispose()};a.prototype.clear=function(){var b=this.disposables.toArray();this.disposables.clear();for(var a=this.length=0,d=b.length;a<d;a++)b[a].dispose()};a.prototype.contains=function(b){return this.disposables.contains(b)};a.prototype.toArray=function(){return this.disposables.toArray()};return a}(),I=k.Disposable=function(){function a(b){this.isDisposed=false;this.action=b}a.prototype.dispose=function(){if(!this.isDisposed){this.action();this.isDisposed=true}};return a}(),w=I.create=
function(a){return new I(a)},p=I.empty=new I(function(){}),r=k.SingleAssignmentDisposable=function(){function a(){this.isDisposed=false;this.current=null}a.prototype.disposable=function(b){return!b?this.getDisposable():this.setDisposable(b)};a.prototype.getDisposable=function(){return this.current};a.prototype.setDisposable=function(b){if(this.current!==null)throw Error("Disposable has already been assigned");var a=this.isDisposed;if(!a)this.current=b;a&&b!==null&&b.dispose()};a.prototype.dispose=
function(){var b=null;if(!this.isDisposed){this.isDisposed=true;b=this.current;this.current=null}b!==null&&b.dispose()};return a}(),z=k.SerialDisposable=function(){function a(){this.isDisposed=false;this.current=null}a.prototype.getDisposable=function(){return this.current};a.prototype.setDisposable=function(b){var a=this.isDisposed,d=null;if(!a){d=this.current;this.current=b}d!==null&&d.dispose();a&&b!==null&&b.dispose()};a.prototype.disposable=function(b){if(b)this.setDisposable(b);else return this.getDisposable()};
a.prototype.dispose=function(){var b=null;if(!this.isDisposed){this.isDisposed=true;b=this.current;this.current=null}b!==null&&b.dispose()};return a}(),Y=k.RefCountDisposable=function(){function a(b){this.underlyingDisposable=b;this.isPrimaryDisposed=this.isDisposed=false;this.count=0}a.prototype.dispose=function(){var b=false;if(!this.isDisposed&&!this.isPrimaryDisposed){this.isPrimaryDisposed=true;if(this.count===0)b=this.isDisposed=true}b&&this.underlyingDisposable.dispose()};a.prototype.getDisposable=
function(){return this.isDisposed?p:function(b){b.count++;return{isInnerDisposed:false,dispose:function(){var a=false;if(!b.isDisposed&&!this.isInnerDisposed){this.isInnerDisposed=true;b.count--;if(b.count===0&&b.isPrimaryDisposed)a=b.isUnderlyingDisposed=true}a&&b.underlyingDisposable.dispose()}}}(this)};return a}(),oa=function(){function a(b,a){this.scheduler=b;this.disposable=a;this.isDisposed=false}a.prototype.dispose=function(){var b=this;this.scheduler.schedule(function(){if(!b.isDisposed){b.isDisposed=
true;b.disposable.dispose()}})};return a}(),Z=function(){function a(b,a,d,e,f){this.scheduler=b;this.state=a;this.action=d;this.dueTime=e;this.comparer=f||function(b,a){return b-a};this.disposable=new r}a.prototype.invoke=function(){return this.disposable.disposable(this.invokeCore())};a.prototype.compareTo=function(b){return this.comparer(this.dueTime,b.dueTime)};a.prototype.isCancelled=function(){return this.disposable.isDisposed};a.prototype.invokeCore=function(){return this.action(this.scheduler,
this.state)};return a}(),q=k.Scheduler=function(){function a(b,a,c,d){this.now=b;this._schedule=a;this._scheduleRelative=c;this._scheduleAbsolute=d}var b=function(b,a){var c=a.first,d=a.second,e=new o,l=function(a){d(a,function(a){var c=false,d=false,h=b.scheduleWithState(a,function(a,b){c?e.remove(h):d=true;l(b);return p});if(!d){e.add(h);c=true}})};l(c);return e},c=function(a,b){var c=b.first,d=b.second,e=new o,l=function(b){d(b,function(b,c){var d,h,B;B=h=false;d=a.scheduleWithRelativeAndState(b,
c,function(b,a){h?e.remove(d):B=true;l(a);return p});if(!B){e.add(d);h=true}})};l(c);return e},d=function(b,a){var c=a.first,d=a.second,e=new o,l=function(a){d(a,function(a,c){var d=false,h=false,B=b.scheduleWithAbsoluteAndState(a,c,function(a,b){d?e.remove(B):h=true;l(b);return p});if(!h){e.add(B);d=true}})};l(c);return e},e=function(a,b){b();return p};a.prototype.schedule=function(a){return this._schedule(a,e)};a.prototype.scheduleWithState=function(a,b){return this._schedule(a,b)};a.prototype.scheduleWithRelative=
function(a,b){return this._scheduleRelative(b,a,e)};a.prototype.scheduleWithRelativeAndState=function(a,b,c){return this._scheduleRelative(a,b,c)};a.prototype.scheduleWithAbsolute=function(a,b){return this._scheduleAbsolute(b,a,e)};a.prototype.scheduleWithAbsoluteAndState=function(a,b,c){return this._scheduleAbsolute(a,b,c)};a.prototype.scheduleRecursive=function(a){return this.scheduleRecursiveWithState(a,function(a,b){a(function(){b(a)})})};a.prototype.scheduleRecursiveWithState=function(a,c){return this.scheduleWithState({first:a,
second:c},function(a,c){return b(a,c)})};a.prototype.scheduleRecursiveWithRelative=function(a,b){return this.scheduleRecursiveWithRelativeAndState(b,a,function(a,b){a(function(c){b(a,c)})})};a.prototype.scheduleRecursiveWithRelativeAndState=function(a,b,d){return this._scheduleRelative({first:a,second:d},b,function(a,b){return c(a,b)})};a.prototype.scheduleRecursiveWithAbsolute=function(a,b){return this.scheduleRecursiveWithAbsoluteAndState(b,a,function(a,b){a(function(c){b(a,c)})})};a.prototype.scheduleRecursiveWithAbsoluteAndState=
function(a,b,c){return this._scheduleAbsolute({first:a,second:c},b,function(a,b){return d(a,b)})};a.now=H;a.normalize=function(a){a<0&&(a=0);return a};return a}(),g=function(){function a(){var b=this;a.base.constructor.call(this,H,function(a,d){return d(b,a)},function(a,d,e){for(;q.normalize(d)>0;);return e(b,a)},function(a,d,e){return b.scheduleWithRelativeAndState(a,d-b.now(),e)})}m(a,q);return a}(),x=q.Immediate=new g,pa=function(){function a(){J.queue=new X(4)}a.prototype.dispose=function(){J.queue=
null};a.prototype.run=function(){for(var a,c=J.queue;c.length>0;){a=c.dequeue();if(!a.isCancelled()){for(;a.dueTime-q.now()>0;);a.isCancelled()||a.invoke()}}};return a}(),J=function(){function a(){var b=this;a.base.constructor.call(this,H,function(a,d){return b.scheduleWithRelativeAndState(a,0,d)},function(c,d,e){var f=b.now()+q.normalize(d),d=a.queue,c=new Z(b,c,e,f);if(d===null){e=new pa;try{a.queue.enqueue(c);e.run()}finally{e.dispose()}}else d.enqueue(c);return c.disposable},function(a,d,e){return b.scheduleWithRelativeAndState(a,
d-b.now(),e)})}m(a,q);a.prototype.scheduleRequired=function(){return a.queue===null};a.prototype.ensureTrampoline=function(a){return this.scheduleRequired()?this.schedule(a):a()};a.queue=null;return a}(),A=q.CurrentThread=new J;k.VirtualTimeScheduler=function(){function a(b,c){var d=this;this.clock=b;this.comparer=c;this.isEnabled=false;a.base.constructor.call(this,function(){return d.toDateTimeOffset(d.clock)},function(a,b){return d.scheduleAbsolute(a,d.clock,b)},function(a,b,c){return d.scheduleRelative(a,
d.toRelative(b),c)},function(a,b,c){return d.scheduleRelative(a,d.toRelative(b-d.now()),c)});this.queue=new X(1024)}m(a,q);a.prototype.scheduleRelative=function(a,c,d){c=this.add(this.clock,c);return this.scheduleAbsolute(a,c,d)};a.prototype.start=function(){var a;if(!this.isEnabled){this.isEnabled=true;do{a=this.getNext();if(a!==null){if(this.comparer(a.dueTime,this.clock)>0)this.clock=a.dueTime;a.invoke()}else this.isEnabled=false}while(this.isEnabled)}};a.prototype.stop=function(){return this.isEnabled=
false};a.prototype.advanceTo=function(a){var c;if(this.comparer(this.clock,a)>=0)throw Error("Argument out of range");if(!this.isEnabled){this.isEnabled=true;do{c=this.getNext();if(c!==null&&this.comparer(c.dueTime,a)<=0){if(this.comparer(c.dueTime,this.clock)>0)this.clock=c.dueTime;c.invoke()}else this.isEnabled=false}while(this.isEnabled);return this.clock=a}};a.prototype.advanceBy=function(a){a=this.add(this.clock,a);if(this.comparer(this.clock,a)>=0)throw Error("Argument out of range");return this.advanceTo(a)};
a.prototype.getNext=function(){for(var a;this.queue.length>0;){a=this.queue.peek();if(a.isCancelled())this.queue.dequeue();else return a}return null};a.prototype.scheduleAbsolute=function(a,c,d){var e=this,f=new Z(e,a,function(a,b){e.queue.remove(f);return d(a,b)},c,e.comparer);e.queue.enqueue(f);return f.disposable};return a}();var g=function(){function a(){var b=this;a.base.constructor.call(this,H,function(a,d){var e=D.setTimeout(function(){d(b,a)},0);return w(function(){D.clearTimeout(e)})},function(a,
d,e){var f,d=q.normalize(d);f=D.setTimeout(function(){e(b,a)},d);return w(function(){D.clearTimeout(f)})},function(a,d,e){return b.scheduleWithRelativeAndState(a,d-b.now(),e)})}m(a,q);return a}(),qa=q.Timeout=new g,n=k.Notification=function(){function a(){}a.prototype.accept=function(a,c,d){return arguments.length>1||typeof a==="function"?this._accept(a,c,d):this._acceptObservable(a)};a.prototype.toObservable=function(a){var c=this,a=a||q.Immediate;return i(function(d){return a.schedule(function(){c._acceptObservable(d);
if(c.kind==="N")d.onCompleted()})})};a.prototype.hasValue=false;a.prototype.equals=function(a){return this.toString()===(a===t||a===null?"":a.toString())};return a}();n.createOnNext=function(a){var b=new n;b.value=a;b.hasValue=true;b.kind="N";b._accept=function(a){return a(this.value)};b._acceptObservable=function(a){return a.onNext(this.value)};b.toString=function(){return"OnNext("+this.value+")"};return b};n.createOnError=function(a){var b=new n;b.exception=a;b.kind="E";b._accept=function(a,b){return b(this.exception)};
b._acceptObservable=function(a){return a.onError(this.exception)};b.toString=function(){return"OnError("+this.exception+")"};return b};n.createOnCompleted=function(){var a=new n;a.kind="C";a._accept=function(a,c,d){return d()};a._acceptObservable=function(a){return a.onCompleted()};a.toString=function(){return"OnCompleted()"};return a};var aa=k.Internals.Enumerator=function(a,b,c){this.moveNext=a;this.getCurrent=b;this.dispose=c},ba=aa.create=function(a,b,c){var d=false;c||(c=function(){});return new aa(function(){if(d)return false;
var b=a();if(!b){d=true;c()}return b},function(){return b()},function(){if(!d){c();d=true}})},G=k.Internals.Enumerable=function(a){this.getEnumerator=a},g=G.prototype;g.concat=function(){var a=this;return i(function(b){var c,d=a.getEnumerator(),e=false,f=new z;c=x.scheduleRecursive(function(a){var c,g,$=false;if(!e){try{($=d.moveNext())?c=d.getCurrent():d.dispose()}catch(l){g=l;d.dispose()}if(g!==void 0)b.onError(g);else if($){g=new r;f.disposable(g);g.disposable(c.subscribe(function(a){b.onNext(a)},
function(a){b.onError(a)},function(){a()}))}else b.onCompleted()}});return new o(f,c,w(function(){e=true;d.dispose()}))})};g.catchException=function(){var a=this;return i(function(b){var c,d=a.getEnumerator(),e=false,f,h;f=new z;c=x.scheduleRecursive(function(a){var c,g,l;l=false;if(!e){try{(l=d.moveNext())&&(c=d.getCurrent())}catch(i){g=i}if(g!==void 0)b.onError(g);else if(l){g=new r;f.disposable(g);g.disposable(c.subscribe(function(a){b.onNext(a)},function(b){h=b;a()},function(){b.onCompleted()}))}else if(h!==
void 0)b.onError(h);else b.onCompleted()}});return new o(f,c,w(function(){e=true}))})};var ca=G.repeat=function(a,b){b===t&&(b=-1);return new G(function(){var c,d=b;return ba(function(){if(d===0)return false;d>0&&d--;c=a;return true},function(){return c})})},O=G.forEach=function(a,b){b||(b=function(a){return a});return new G(function(){var c,d=-1;return ba(function(){if(++d<a.length){c=b(a[d],d);return true}return false},function(){return c})})},u=k.Observer=function(){},P=k.Internals.AbstractObserver=
function(){function a(){this.isStopped=false}m(a,u);a.prototype.onNext=function(a){this.isStopped||this.next(a)};a.prototype.onError=function(a){if(!this.isStopped){this.isStopped=true;this.error(a)}};a.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=true;this.completed()}};a.prototype.dispose=function(){this.isStopped=true};return a}(),K=function(){function a(b,c,d){a.base.constructor.call(this);this._onNext=b;this._onError=c;this._onCompleted=d}m(a,P);a.prototype.next=function(a){this._onNext(a)};
a.prototype.error=function(a){this._onError(a)};a.prototype.completed=function(){this._onCompleted()};return a}(),Q=k.Internals.BinaryObserver=function(){function a(a,c){if(typeof a==="function"&&typeof c==="function"){this.leftObserver=da(a);this.rightObserver=da(c)}else{this.leftObserver=a;this.rightObserver=c}}m(a,u);a.prototype.onNext=function(a){var c=this;return a.switchValue(function(a){return a.accept(c.leftObserver)},function(a){return a.accept(c.rightObserver)})};a.prototype.onError=function(){};
a.prototype.onCompleted=function(){};return a}(),ea=function(){function a(a,c){this.scheduler=a;this.observer=c;this.hasFaulted=this.isAcquired=false;this.queue=[];this.disposable=new z}m(a,P);a.prototype.ensureActive=function(){var a=false,c=this;if(!this.hasFaulted&&this.queue.length>0){a=!this.isAcquired;this.isAcquired=true}a&&this.disposable.disposable(this.scheduler.scheduleRecursive(function(a){var b;if(c.queue.length>0){b=c.queue.shift();try{b()}catch(f){c.queue=[];c.hasFaulted=true;throw f;
}a()}else c.isAcquired=false}))};a.prototype.next=function(a){var c=this;this.queue.push(function(){c.observer.onNext(a)})};a.prototype.error=function(a){var c=this;this.queue.push(function(){c.observer.onError(a)})};a.prototype.completed=function(){var a=this;this.queue.push(function(){a.observer.onCompleted()})};a.prototype.dispose=function(){a.base.dispose.call(this);this.disposable.dispose()};return a}(),ra=u.create=function(a,b,c){a||(a=M);b||(b=function(a){throw a;});c||(c=M);return new K(a,
b,c)};u.fromNotifier=function(a){return new K(function(b){return a(n.createOnNext(b))},function(b){return a(n.createOnError(b))},function(){return a(n.createOnCompleted())})};var da=function(a){return new K(function(b){a(n.createOnNext(b))},function(b){a(n.createOnError(b))},function(){a(n.createOnCompleted())})};u.prototype.toNotifier=function(){var a=this;return function(b){return b.accept(a)}};u.prototype.asObserver=function(){var a=this;return new K(function(b){return a.onNext(b)},function(b){return a.onError(b)},
function(){return a.onCompleted()})};var j=k.Observable=function(){function a(){}a.prototype.subscribe=function(a,c,d){return this._subscribe(arguments.length===0||arguments.length>1||typeof a==="function"?ra(a,c,d):a)};return a}(),g=j.prototype,ta=function(){function a(b){a.base.constructor.call(this);this._subscribe=function(a){var d=new sa(a);A.scheduleRequired()?A.schedule(function(){d.disposable(b(d))}):d.disposable(b(d));return d}}m(a,j);a.prototype._subscribe=function(a){return this._subscribe(a)};
return a}(),sa=function(){function a(b){a.base.constructor.call(this);this.observer=b;this.m=new r}m(a,P);a.prototype.disposable=function(a){return this.m.disposable(a)};a.prototype.next=function(a){this.observer.onNext(a)};a.prototype.error=function(a){this.observer.onError(a);this.m.dispose()};a.prototype.completed=function(){this.observer.onCompleted();this.m.dispose()};a.prototype.dispose=function(){a.base.dispose.call(this);this.m.dispose()};return a}(),fa=function(){function a(b,c,d){a.base.constructor.call(this);
this.key=b;this.underlyingObservable=!d?c:i(function(a){return new o(d.getDisposable(),c.subscribe(a))})}m(a,j);a.prototype._subscribe=function(a){return this.underlyingObservable.subscribe(a)};return a}(),ua=k.ConnectableObservable=function(){function a(a,c){var d=a.asObservable(),e=false,f=null;this.connect=function(){if(!e){e=true;f=new o(d.subscribe(c),w(function(){e=false}))}return f};this._subscribe=function(a){return c.subscribe(a)}}m(a,j);a.prototype.connect=function(){return this.connect()};
a.prototype.refCount=function(){var a=null,c=0,d=this;return i(function(e){var f,h;c++;f=c===1;h=d.subscribe(e);f&&(a=d.connect());return w(function(){h.dispose();c--;c===0&&a.dispose()})})};a.prototype._subscribe=function(a){return this._subscribe(a)};return a}(),R=function(){function a(a,c){this.subject=a;this.observer=c}a.prototype.dispose=function(){if(!this.subject.isDisposed&&this.observer!==null){this.subject.observers.remove(this.observer);this.observer=null}};return a}(),L=k.Subject=function(){function a(){a.base.constructor.call(this);
this.isStopped=this.isDisposed=false;this.observers=new s}m(a,j);E(a,u);var b=function(){if(this.isDisposed)throw Error("Object has been disposed");};a.prototype.onCompleted=function(){var a;b.call(this);if(!this.isStopped){a=this.observers.toArray();this.observers=new s;this.isStopped=true}if(a)for(var d=0,e=a.length;d<e;d++)a[d].onCompleted()};a.prototype.onError=function(a){var d;b.call(this);if(!this.isStopped){d=this.observers.toArray();this.observers=new s;this.isStopped=true;this.exception=
a}if(d)for(var e=0,f=d.length;e<f;e++)d[e].onError(a)};a.prototype.onNext=function(a){var d;b.call(this);this.isStopped||(d=this.observers.toArray());if(d)for(var e=0,f=d.length;e<f;e++)d[e].onNext(a)};a.prototype._subscribe=function(a){b.call(this);if(!this.isStopped){this.observers.add(a);return new R(this,a)}if(this.exception){a.onError(this.exception);return p}a.onCompleted();return p};a.prototype.dispose=function(){this.isDisposed=true;this.observers=null};a.create=function(a,b){return new va(a,
b)};return a}(),S=k.AsyncSubject=function(){function a(){a.base.constructor.call(this);this.isStopped=this.isDisposed=false;this.value=null;this.hasValue=false;this.observers=new s;this.exception=null}m(a,j);E(a,u);var b=function(){if(this.isDisposed)throw Error("Object has been disposed");};a.prototype.onCompleted=function(){var a=false,d,e,f,h;b.call(this);if(!this.isStopped){d=this.observers.toArray();this.observers=new s;this.isStopped=true;e=this.value;a=this.hasValue}if(d)if(a){f=0;for(h=d.length;f<
h;f++){a=d[f];a.onNext(e);a.onCompleted()}}else{f=0;for(h=d.length;f<h;f++)d[f].onCompleted()}};a.prototype.onError=function(a){var d;b.call(this);if(!this.isStopped){d=this.observers.toArray();this.observers=new s;this.isStopped=true;this.exception=a}if(d)for(var e=0,f=d.length;e<f;e++)d[e].onError(a)};a.prototype.onNext=function(a){b.call(this);if(!this.isStopped){this.value=a;this.hasValue=true}};a.prototype._subscribe=function(a){var d,e,f;b.call(this);if(!this.isStopped){this.observers.add(a);
return new R(this,a)}d=this.exception;e=this.hasValue;f=this.value;if(d)a.onError(d);else{if(e)a.onNext(f);a.onCompleted()}return p};a.prototype.dispose=function(){this.isDisposed=true;this.value=this.exception=this.observers=null};return a}(),ga=k.BehaviorSubject=function(){function a(b){a.base.constructor.call(this);this.value=b;this.observers=new s;this.isStopped=this.isDisposed=false;this.exception=null}m(a,j);E(a,u);var b=function(){if(this.isDisposed)throw Error("Object has been disposed");
};a.prototype.onCompleted=function(){var a;b.call(this);if(!this.isStopped){a=this.observers.toArray();this.observers=new s;this.isStopped=true}if(a)for(var d=0,e=a.length;d<e;d++)a[d].onCompleted()};a.prototype.onError=function(a){var d;b.call(this);if(!this.isStopped){d=this.observers.toArray();this.observers=new s;this.isStopped=true;this.exception=a}if(d)for(var e=0,f=d.length;e<f;e++)d[e].onError(a)};a.prototype.onNext=function(a){var d;b.call(this);if(!this.isStopped){this.value=a;d=this.observers.toArray()}if(d)for(var e=
0,f=d.length;e<f;e++)d[e].onNext(a)};a.prototype._subscribe=function(a){var d;b.call(this);if(!this.isStopped){this.observers.add(a);a.onNext(this.value);return new R(this,a)}if(d=this.exception)a.onError(d);else a.onCompleted();return p};a.prototype.dispose=function(){this.isDisposed=true;this.exception=this.value=this.observers=null};return a}(),ha=k.ReplaySubject=function(){function a(a,b,c){this.bufferSize=a===t?Number.MAX_VALUE:a;this.window=b===t?Number.MAX_VALUE:b;this.scheduler=c||A;this.q=
[];this.observers=new s;this.isDisposed=this.isStopped=false}m(a,j);E(a,j);var b=function(){if(this.isDisposed)throw Error("Object has been disposed");};a.prototype._trim=function(a){var b=this.isStopped?1:0,c=b+this.bufferSize;if(c<this.bufferSize)c=this.bufferSize;for(;this.q.length>c;)this.q.shift();for(;this.q.length>b&&a-this.q[0].timestamp>this.window;)this.q.shift()};a.prototype._enqueue=function(a){var b=this.scheduler.now();this.q.push({value:a,timestamp:b});this._trim(b)};a.prototype.onNext=
function(a){var c,f,h,g;b.call(this);if(!this.isStopped){c=this.observers.toArray();this._enqueue(n.createOnNext(a));h=0;for(g=c.length;h<g;h++){f=c[h];f.onNext(a)}}if(c){h=0;for(g=c.length;h<g;h++){f=c[h];f.ensureActive()}}};a.prototype.onError=function(a){var c,f,h;b.call(this);if(!this.isStopped){this.isStopped=true;this._enqueue(n.createOnError(a));c=this.observers.toArray();f=0;for(h=c.length;f<h;f++)c[f].onError(a);this.observers=new s}if(c){f=0;for(h=c.length;f<h;f++)c[f].ensureActive()}};
a.prototype.onCompleted=function(){var a,c,f;b.call(this);if(!this.isStopped){this.isStopped=true;this._enqueue(n.createOnCompleted());a=this.observers.toArray();c=0;for(f=a.length;c<f;c++)a[c].onCompleted();this.observers=new s}if(a){c=0;for(f=a.length;c<f;c++)a[c].ensureActive()}};a.prototype._subscribe=function(a){var a=new ea(this.scheduler,a),e=new c(this,a);b.call(this);this._trim(this.scheduler.now());this.observers.add(a);for(var f=0,h=this.q.length;f<h;f++)this.q[f].value.accept(a);a.ensureActive();
return e};a.prototype.dispose=function(){this.isDisposed=true;this.observers=null};var c=function(){function a(b,c){this.subject=b;this.observer=c}a.prototype.dispose=function(){this.observer.dispose();this.subject.isDisposed||this.subject.observers.remove(this.observer)};return a}();return a}(),va=function(){function a(a,c){this.observer=a;this.observable=c}m(a,j);E(a,u);a.prototype.onCompleted=function(){return this.observer.onCompleted()};a.prototype.onError=function(a){return this.observer.onError(a)};
a.prototype.onNext=function(a){return this.observer.onNext(a)};a.prototype._subscribe=function(a){return this.observable.subscribe(a)};return a}();j.start=function(a,b,c,d){c||(c=[]);return wa(a,d).apply(b,c)};var wa=j.toAsync=function(a,b){b||(b=qa);return function(){var c=new S,d=function(){var b;try{b=a.apply(this,arguments)}catch(d){c.onError(d);return}c.onNext(b);c.onCompleted()},e=v.call(arguments),f=this;b.schedule(function(){d.apply(f,e)});return c}};g.multicast=function(a,b){var c=this;return typeof a===
"function"?i(function(d){var e=c.multicast(a());return new o(b(e).subscribe(d),e.connect())}):new ua(c,a)};g.publish=function(a){return!a?this.multicast(new L):this.multicast(function(){return new L},a)};g.publishLast=function(a){return!a?this.multicast(new S):this.multicast(function(){return new S},a)};g.replay=function(a,b,c,d){return!a||a===null?this.multicast(new ha(b,c,d)):this.multicast(function(){return new ha(b,c,d)},a)};g.publishValue=function(a,b){return typeof a==="function"?this.multicast(function(){return new ga(b)},
a):this.multicast(new ga(a))};var ia=j.never=function(){return i(function(){return p})},xa=j.empty=function(a){a||(a=x);return i(function(b){return a.schedule(function(){return b.onCompleted()})})},ya=j.returnValue=function(a,b){b||(b=x);return i(function(c){return b.schedule(function(){c.onNext(a);return c.onCompleted()})})},ja=j.throwException=function(a,b){b||(b=x);return i(function(c){return b.schedule(function(){return c.onError(a)})})};j.generate=function(a,b,c,d,e){e||(e=A);return i(function(f){var h=
true,g=a;return e.scheduleRecursive(function(a){var e,l;try{h?h=false:g=c(g);(e=b(g))&&(l=d(g))}catch(i){f.onError(i);return}if(e){f.onNext(l);a()}else f.onCompleted()})})};var za=j.defer=function(a){return i(function(b){var c;try{c=a()}catch(d){return ja(d).subscribe(b)}return c.subscribe(b)})};j.using=function(a,b){return i(function(c){var d=p,e,f;try{e=a();e!==null&&(d=e);f=b(e)}catch(h){return new o(ja(h).subscribe(c),d)}return new o(f.subscribe(c),d)})};var ka=j.fromArray=function(a,b){b||(b=
A);return i(function(c){var d=0;return b.scheduleRecursive(function(b){if(d<a.length){c.onNext(a[d++]);b()}else c.onCompleted()})})},i=j.createWithDisposable=function(a){return new ta(a)};j.create=function(a){return i(function(b){return w(a(b))})};j.range=function(a,b,c){c||(c=A);return i(function(d){return c.scheduleRecursiveWithState(0,function(c,f){if(c<b){d.onNext(a+c);f(c+1)}else d.onCompleted()})})};g.repeat=function(a){return ca(this,a).concat()};g.retry=function(a){return ca(this,a).catchException()};
j.repeat=function(a,b,c){c||(c=A);b===t&&(b=-1);return ya(a,c).repeat(b)};g.select=function(a){var b=this;return i(function(c){var d=0;return b.subscribe(function(b){var f;try{f=a(b,d++)}catch(h){c.onError(h);return}c.onNext(f)},function(a){c.onError(a)},function(){c.onCompleted()})})};g.where=function(a){var b=this;return i(function(c){var d=0;return b.subscribe(function(b){var f;try{f=a(b,d++)}catch(h){c.onError(h);return}if(f)c.onNext(b)},function(a){c.onError(a)},function(){c.onCompleted()})})};
g.groupByUntil=function(a,b,c,d){var e=this;b||(b=y);d||(d=U);return i(function(f){var h={},g=new o,i=new Y(g);g.add(e.subscribe(function(e){var l,j,k,o,m,n,s,q,p;try{j=a(e);n=d(j)}catch(u){for(p in h)h[p].onError(u);f.onError(u);return}m=false;try{q=h[n];if(!q){q=new L;h[n]=q;m=true}}catch(v){for(p in h)h[p].onError(v);f.onError(v);return}if(m){m=new fa(j,q,i);j=new fa(j,q);try{l=c(j)}catch(w){for(p in h)h[p].onError(w);f.onError(w);return}f.onNext(m);s=new r;g.add(s);o=function(){if(h[n]!==t){delete h[n];
q.onCompleted()}g.remove(s)};s.disposable(l.take(1).subscribe(function(){},function(a){for(p in h)h[p].onError(a);f.onError(a)},function(){o()}))}try{k=b(e)}catch(x){for(p in h)h[p].onError(x);f.onError(x);return}q.onNext(k)},function(a){for(var b in h)h[b].onError(a);f.onError(a)},function(){for(var a in h)h[a].onCompleted();f.onCompleted()}));return i})};g.groupBy=function(a,b,c){return this.groupByUntil(a,b,function(){return ia()},c)};g.take=function(a,b){if(a<0)throw Error("Argument out of range");
if(a===0)return xa(b);var c=this;return i(function(b){var e=a;return c.subscribe(function(a){if(e>0){e--;b.onNext(a);if(e===0)b.onCompleted()}},function(a){return b.onError(a)},function(){return b.onCompleted()})})};g.skip=function(a){if(a<0)throw Error("Argument out of range");var b=this;return i(function(c){var d=a;return b.subscribe(function(a){if(d<=0)c.onNext(a);else d--},function(a){return c.onError(a)},function(){return c.onCompleted()})})};g.takeWhile=function(a){var b=this;return i(function(c){var d=
0,e=true;return b.subscribe(function(b){if(e){try{e=a(b,d++)}catch(h){c.onError(h);return}if(e)c.onNext(b);else c.onCompleted()}},function(a){return c.onError(a)},function(){return c.onCompleted()})})};g.skipWhile=function(a){var b=this;return i(function(c){var d=0,e=false;return b.subscribe(function(b){if(!e)try{e=!a(b,d++)}catch(h){c.onError(h);return}if(e)c.onNext(b)},function(a){c.onError(a)},function(){c.onCompleted()})})};g.selectMany=function(a,b){return b!==t?this.selectMany(function(c){return a(c).select(function(a){return b(c,
a)})}):typeof a==="function"?this.select(a).mergeObservable():this.select(function(){return a}).mergeObservable()};g.finalValue=function(){var a=this;return i(function(b){var c=false,d;return a.subscribe(function(a){c=true;d=a},function(a){b.onError(a)},function(){if(c){b.onNext(d);b.onCompleted()}else b.onError(Error("Sequence contains no elements."))})})};g.toArray=function(){return this.scan([],function(a,b){a.push(b);return a}).startWith([]).finalValue()};g.materialize=function(){var a=this;return i(function(b){return a.subscribe(function(a){b.onNext(n.createOnNext(a))},
function(a){b.onNext(n.createOnError(a));b.onCompleted()},function(){b.onNext(n.createOnCompleted());b.onCompleted()})})};g.dematerialize=function(){var a=this;return i(function(b){return a.subscribe(function(a){return a.accept(b)},function(a){b.onError(a)},function(){b.onCompleted()})})};g.asObservable=function(){var a=this;return i(function(b){return a.subscribe(b)})};g.windowWithCount=function(a,b){var c=this;if(a<=0)throw Error("Argument out of range");b===t&&(b=a);if(b<=0)throw Error("Argument out of range");
return i(function(d){var e=new r,f=new Y(e),h=0,g=[],i=function(){var a=new L;g.push(a);d.onNext(la(a,f))};i();e.disposable(c.subscribe(function(c){var d;for(d=0;d<g.length;d++)g[d].onNext(c);c=h-a+1;if(c>=0&&c%b===0){c=g.shift();c.onCompleted()}h++;h%b===0&&i()},function(a){for(;g.length>0;)g.shift().onError(a);d.onError(a)},function(){for(;g.length>0;)g.shift().onCompleted();d.onCompleted()}));return f})};g.bufferWithCount=function(a,b){b===t&&(b=a);return this.windowWithCount(a,b).selectMany(function(a){return a.toArray()}).where(function(a){return a.length>
0})};g.startWith=function(){var a,b;a=0;if(arguments.length>0&&arguments[0].now!==void 0){b=arguments[0];a=1}else b=x;a=v.call(arguments,a);return O([ka(a,b),this]).concat()};g.scan=function(){var a,b=false,c;if(arguments.length===2){a=arguments[0];c=arguments[1];b=true}else c=arguments[0];var d=this;return za(function(){var e=false,f;return d.select(function(d){if(e)f=c(f,d);else{f=b?c(a,d):d;e=true}return f})})};g.distinctUntilChanged=function(a,b){var c=this;a||(a=y);b||(b=T);return i(function(d){var e=
false,f;return c.subscribe(function(c){var g=false,i;try{i=a(c)}catch(j){d.onError(j);return}if(e)try{g=b(f,i)}catch(l){d.onError(l);return}if(!e||!g){e=true;f=i;d.onNext(c)}},function(a){d.onError(a)},function(){d.onCompleted()})})};g.finallyAction=function(a){var b=this;return i(function(c){var d=b.subscribe(c);return w(function(){try{d.dispose()}finally{a()}})})};g.doAction=function(a,b,c){var d=this,e;if(typeof a==="function")e=a;else{e=function(b){a.onNext(b)};b=function(b){a.onError(b)};c=function(){a.onCompleted()}}return i(function(a){return d.subscribe(function(b){try{e(b)}catch(c){a.onError(c)}a.onNext(b)},
function(c){if(b)try{b(c)}catch(d){a.onError(d)}a.onError(c)},function(){if(c)try{c()}catch(b){a.onError(b)}a.onCompleted()})})};g.skipLast=function(a){var b=this;return i(function(c){var d=[];return b.subscribe(function(b){d.push(b);if(d.length>a)c.onNext(d.shift())},function(a){c.onError(a)},function(){c.onCompleted()})})};g.takeLast=function(a){var b=this;return i(function(c){var d=[];return b.subscribe(function(b){d.push(b);d.length>a&&d.shift()},function(a){c.onError(a)},function(){for(;d.length>
0;)c.onNext(d.shift());c.onCompleted()})})};g.ignoreElements=function(){var a=this;return i(function(b){return a.subscribe(M,function(a){b.onError(a)},function(){b.onCompleted()})})};g.elementAt=function(a){if(a<0)throw Error("Argument out of range");var b=this;return i(function(c){var d=a;return b.subscribe(function(a){if(d===0){c.onNext(a);c.onCompleted()}d--},function(a){c.onError(a)},function(){c.onError(Error("Argument out of range"))})})};g.elementAtOrDefault=function(a,b){var c=this;if(a<0)throw Error("Argument out of range");
b===t&&(b=null);return i(function(d){var e=a;return c.subscribe(function(a){if(e===0){d.onNext(a);d.onCompleted()}e--},function(a){d.onError(a)},function(){d.onNext(b);d.onCompleted()})})};g.defaultIfEmpty=function(a){var b=this;a===t&&(a=null);return i(function(c){var d=false;return b.subscribe(function(a){d=true;c.onNext(a)},function(a){c.onError(a)},function(){if(!d)c.onNext(a);c.onCompleted()})})};g.distinct=function(a,b){var c=this;a||(a=y);b||(b=U);return i(function(d){var e={};return c.subscribe(function(c){var h,
g,i,j=false;try{h=a(c);g=b(h)}catch(l){d.onError(l);return}for(i in e)if(g===i){j=true;break}if(!j){e[g]=null;d.onNext(c)}},function(a){d.onError(a)},function(){d.onCompleted()})})};g.mergeObservable=function(){var a=this;return i(function(b){var c=new o,d=false,e=new r;c.add(e);e.disposable(a.subscribe(function(a){var e=new r;c.add(e);e.disposable(a.subscribe(function(a){b.onNext(a)},function(a){b.onError(a)},function(){c.remove(e);if(d&&c.length===1)b.onCompleted()}))},function(a){b.onError(a)},
function(){d=true;if(c.length===1)b.onCompleted()}));return c})};g.merge=function(a){if(typeof a!=="number")return j.merge(this,a);var b=this;return i(function(c){var d=0,e=new o,f=false,h=[],g=function(a){var b=new r;e.add(b);b.disposable(a.subscribe(function(a){c.onNext(a)},function(a){c.onError(a)},function(){var a;e.remove(b);if(h.length>0){a=h.shift();g(a)}else{d--;if(f&&d===0)c.onCompleted()}}))};e.add(b.subscribe(function(b){if(d<a){d++;g(b)}else h.push(b)},function(a){c.onError(a)},function(){f=
true;if(d===0)c.onCompleted()}));return e})};g.switchLatest=function(){var a=this;return i(function(b){var c=false,d=new z,e=false,f=0,h=a.subscribe(function(a){var h=new r,g=++f;c=true;d.disposable(h);return h.disposable(a.subscribe(function(a){if(f===g)b.onNext(a)},function(a){if(f===g)b.onError(a)},function(){if(f===g){c=false;if(e)b.onCompleted()}}))},function(a){b.onError(a)},function(){e=true;if(!c)b.onCompleted()});return new o(h,d)})};j.merge=function(){var a,b;if(arguments[0])if(arguments[0].now){a=
arguments[0];b=v.call(arguments,1)}else{a=x;b=v.call(arguments,0)}else{a=x;b=v.call(arguments,1)}b[0]instanceof Array&&(b=b[0]);return ka(b,a).mergeObservable()};g.concat=function(){var a=Aa,b=v.call(arguments,0);b.unshift(this);return a.apply(this,b)};g.concatObservable=function(){return this.merge(1)};var Aa=j.concat=function(){var a=F(arguments,0);return O(a).concat()};g.catchException=function(a){return typeof a==="function"?Ba(this,a):Ca([this,a])};var Ba=function(a,b){return i(function(c){var d=
new r,e=new z;d.disposable(a.subscribe(function(a){c.onNext(a)},function(a){var d;try{d=b(a)}catch(g){c.onError(g);return}a=new r;e.disposable(a);a.disposable(d.subscribe(c))},function(){c.onCompleted()}));return e})},Ca=j.catchException=function(){var a=F(arguments,0);return O(a).catchException()};g.onErrorResumeNext=function(a){return Da([this,a])};var Da=j.onErrorResumeNext=function(){var a=F(arguments,0);return i(function(b){var c=0,d=new z,e=x.scheduleRecursive(function(e){var g,i;if(c<a.length){g=
a[c++];i=new r;d.disposable(i);i.disposable(g.subscribe(function(a){b.onNext(a)},function(){e()},function(){e()}))}else b.onCompleted()});return new o(d,e)})};g.combineLatest=function(){var a=this,b=v.call(arguments),c=b.pop();b.unshift(this);return i(function(d){for(var e=b.length,f=Array(e),g=false,i=Array(e),j=Array(e),k=function(b){var e;f[b]=true;if(g||(g=C.call(f,y))){try{e=c.apply(a,j)}catch(l){d.onError(l);return}d.onNext(e)}else if(C.call(W.call(i,function(a,c){return c!==b}),y))d.onCompleted()},
l=Array(e),m=0;m<e;m++)(function(a){l[a]=new r;l[a].setDisposable(b[a].subscribe(function(b){j[a]=b;k(a)},function(a){d.onError(a)},function(){i[a]=true;if(C.call(i,y))d.onCompleted()}))})(m);return new o(l)})};g.zip=function(){var a=this,b=v.call(arguments),c=b.pop();b.unshift(a);return i(function(d){for(var e=b.length,f=Array(e),g=Array(e),i=function(b){var e,i;if(C.call(f,function(a){return a&&a.length>0})){try{i=ma.call(f,function(a){return a.shift()});e=c.apply(a,i)}catch(j){d.onError(j);return}d.onNext(e)}else if(C.call(W.call(g,
function(a,c){return c!==b}),y))d.onCompleted()},j=Array(e),k=0;k<e;k++)(function(a){j[a]=new r;j[a].setDisposable(b[a].subscribe(function(b){f[a]||(f[a]=[]);f[a].push(b);i(a)},function(a){d.onError(a)},function(){g[a]=true;if(C.call(g,y))d.onCompleted()}))})(k);k=new o(j);k.add(w(function(){for(var a=0;a<e;a++)f[a]=null}));return k})};g.takeUntil=function(a){return N(a,this,function(a,c){var d=false,e=false;return new Q(function(c){if(!e&&!d)if(c.kind==="C")d=true;else if(c.kind==="E"){e=d=true;
a.onError(c.exception)}else{e=true;a.onCompleted()}},function(d){if(!e){d.accept(a);(e=d.kind!=="N")&&c.dispose()}})})};g.skipUntil=function(a){return N(this,a,function(a,c,d){var e=false,f=false;return new Q(function(c){if(c.kind=="E")a.onError(c.exception);else e&&c.accept(a)},function(c){if(!f){if(c.kind==="N")e=true;else if(c.kind==="E")a.onError(c.exception);f=true;d.dispose()}})})};j.amb=function(){var a=ia(),b,c,d=F(arguments,0);b=0;for(c=d.length;b<c;b++)a=a.amb(d[b]);return a};g.amb=function(a){return N(this,
a,function(a,c,d){var e="N";return new Q(function(c){if(e==="N"){e="L";d.dispose()}e==="L"&&c.accept(a)},function(d){if(e==="N"){e="R";c.dispose()}e==="R"&&d.accept(a)})})};var Ea=function(a){function b(){b.base.constructor.apply(this,arguments)}m(b,a);b.prototype.next=function(a){b.base.next.call(this,a);this.ensureActive()};b.prototype.error=function(a){b.base.error.call(this,a);this.ensureActive()};b.prototype.completed=function(){b.base.completed.call(this);this.ensureActive()};return b}(ea);
g.observeOn=function(a){var b=this;return i(function(c){return b.subscribe(new Ea(a,c))})};g.subscribeOn=function(a){var b=this;return i(function(c){var d=new r,e=new z;e.setDisposable(d);d.setDisposable(a.schedule(function(){e.setDisposable(new oa(a,b.subscribe(c)))}));return e})}})(this);